<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>運動島 Sports Island</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
<style>
:root{--line:#06C755}
.nav-active{color:var(--line);font-weight:900}
</style>
</head>

<body class="bg-[#F4F5F7]">

<div class="max-w-md mx-auto bg-white min-h-screen flex flex-col">

<!-- BANNER -->
<img src="https://aiwe.cc/wp-content/uploads/2025/12/3486bc19dc6317e16bf4f1449ec52ae4.jpg"
     class="w-full">

<!-- VIEW -->
<main class="flex-1 p-4">

<section id="view-course">
  <h2 class="font-black text-xl mb-4">目前課程</h2>
  <div id="courseList"></div>
</section>

<section id="view-member" class="hidden">
  <h2 class="font-black text-xl mb-4">會員名冊</h2>
  <button onclick="openMemberForm()"
    class="w-full bg-[#06C755] text-white py-3 rounded-xl font-bold mb-4">
    ＋ 新增成員
  </button>
  <div id="memberList"></div>
</section>

<section id="view-member-form" class="hidden">
  <h2 class="font-black text-xl mb-4">成員資料</h2>
  <form id="memberForm" class="space-y-3">
    <input type="hidden" id="mIndex">
    <input id="mName" placeholder="姓名" class="w-full p-3 border rounded">
    <select id="mIdentity" class="w-full p-3 border rounded">
      <option value="一般">一般身分</option>
      <option value="學生">學生</option>
    </select>
    <input id="mPhone" placeholder="電話" class="w-full p-3 border rounded">
    <select id="mCity" class="w-full p-3 border rounded">
      <option>台北市</option><option>新北市</option><option>桃園市</option>
      <option>台中市</option><option>台南市</option><option>高雄市</option>
    </select>
    <div class="flex gap-2">
      <button type="submit"
        class="flex-1 bg-[#06C755] text-white py-3 rounded-xl font-bold">
        儲存
      </button>
      <button type="button" onclick="backToMember()"
        class="flex-1 border py-3 rounded-xl font-bold">
        取消
      </button>
    </div>
  </form>
</section>

</main>

<!-- NAV -->
<nav class="flex border-t">
  <button onclick="show('course')" class="flex-1 py-3">課程</button>
  <button onclick="show('member')" class="flex-1 py-3">會員</button>
</nav>

</div>

<script>
const API="https://sport.wetw-net3.workers.dev/";
let members=[];

function show(v){
  ['course','member','member-form'].forEach(x=>{
    document.getElementById('view-'+x)?.classList.add('hidden');
  });
  document.getElementById('view-'+v).classList.remove('hidden');
}

function openMemberForm(i){
  show('member-form');
  if(i!=null){
    const m=members[i];
    mIndex.value=i;
    mName.value=m.name;
    mPhone.value=m.phone;
    mCity.value=m.city;
  }else{
    memberForm.reset();
    mIndex.value='';
  }
}

function backToMember(){show('member');}

memberForm.onsubmit=e=>{
  e.preventDefault();
  if(mIndex.value===''){
    members.push({
      name:mName.value,
      phone:mPhone.value,
      city:mCity.value
    });
  }
  renderMembers();
  show('member');
};

function renderMembers(){
  memberList.innerHTML=members.map((m,i)=>`
    <div class="border p-3 rounded mb-2 flex justify-between">
      <div>${m.name}<div class="text-xs">${m.phone}</div></div>
      <button onclick="openMemberForm(${i})"
        class="text-[#06C755] font-bold">編輯</button>
    </div>
  `).join('');
}
</script>
</body>
</html>
